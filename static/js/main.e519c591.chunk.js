(this["webpackJsonplearn-rtk-saga"]=this["webpackJsonplearn-rtk-saga"]||[]).push([[0],{315:function(e,t,n){},317:function(e,t,n){"use strict";n.r(t);var a=n(399),r=n(81),c=n(0),i=n.n(c),s=n(15),o=n.n(s),l=n(58),d=n(31),u=Object(d.a)(),j=n(17),b=n(366),h=n(319),O=n(68),x=n(400),f=n(369),m=function(){return Object(l.d)()},p=l.e,g=n(37),v={isLoggedIn:!1,logging:!1,currentUser:void 0},y=Object(g.c)({name:"auth",initialState:v,reducers:{login:function(e,t){e.logging=!0},loginSuccess:function(e,t){e.logging=!1,e.isLoggedIn=!0,e.currentUser=t.payload},loginFailed:function(e,t){e.logging=!1},logout:function(e){e.logging=!1,e.isLoggedIn=!1,e.currentUser=void 0}}}),k=y.actions,w=y.reducer,C=n(2),S=Object(b.a)((function(e){return{root:{display:"flex",flexFlow:"row nowrap",justifyContent:"center",alignItems:"center",minHeight:"100vh"},box:{padding:e.spacing(3)}}}));function _(){var e=S(),t=m();return Object(C.jsx)("div",{className:e.root,children:Object(C.jsxs)(h.a,{elevation:1,className:e.box,children:[Object(C.jsx)(O.a,{variant:"h5",component:"h1",children:"Student Management"}),Object(C.jsx)(x.a,{mt:4,children:Object(C.jsx)(f.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){t(k.login({username:"",password:""}))},children:"Fake Login"})})]})})}function L(e){return Object(C.jsx)("div",{children:" Not Found "})}var N=n(27);function B(e){return Boolean(localStorage.getItem("access_token"))?Object(C.jsx)(j.b,Object(N.a)({},e)):Object(C.jsx)(j.a,{to:"/"})}var F=n(370),A=n(320),M=n(371),I=n(373),R=n(372),W=n(374),P=n(43),D=Object(b.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},link:{color:"inherit",textDecoration:"none","&.active > div":{backgroundColor:e.palette.action.selected}}}}));function E(e){var t=D();return Object(C.jsx)("div",{className:t.root,children:Object(C.jsxs)(F.a,{component:"nav","aria-label":"dashboard student",children:[Object(C.jsx)(P.b,{to:"/admin/dashboard",className:t.link,children:Object(C.jsxs)(A.a,{button:!0,children:[Object(C.jsx)(M.a,{children:Object(C.jsx)(R.a,{})}),Object(C.jsx)(I.a,{primary:"Dashboard"})]})}),Object(C.jsx)(P.b,{to:"/admin/students",className:t.link,children:Object(C.jsxs)(A.a,{button:!0,children:[Object(C.jsx)(M.a,{children:Object(C.jsx)(W.a,{})}),Object(C.jsx)(I.a,{primary:"Student"})]})})]})})}var z=n(375),T=n(376),q=Object(b.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));function U(e){var t=q(),n=m();return Object(C.jsx)("div",{className:t.root,children:Object(C.jsx)(z.a,{position:"static",children:Object(C.jsxs)(T.a,{children:[Object(C.jsx)(O.a,{variant:"h6",className:t.title,children:"Student Management"}),Object(C.jsx)(f.a,{color:"inherit",onClick:function(){n(k.logout())},children:"Logout"})]})})})}var H=Object(g.c)({name:"dashboard",initialState:{loading:!1,statistics:{maleCount:0,femaleCount:0,highMarkCount:0,lowMarkCount:0},highestStudentList:[],lowestStudentList:[],rankingByCityList:[]},reducers:{fetchData:function(e){e.loading=!0},fetchDataSuccess:function(e){e.loading=!1},fetchDataError:function(e){e.loading=!1},setStatistics:function(e,t){e.statistics=t.payload},setHighestStudentList:function(e,t){e.highestStudentList=t.payload},setLowestStudentList:function(e,t){e.lowestStudentList=t.payload},setRankingByCityList:function(e,t){e.rankingByCityList=t.payload}}}),G=H.actions,V=function(e){return e.dashboard.loading},J=function(e){return e.dashboard.statistics},$=function(e){return e.dashboard.highestStudentList},K=function(e){return e.dashboard.lowestStudentList},Q=function(e){return e.dashboard.rankingByCityList},X=H.reducer,Y=n(383),Z=n(384),ee=Object(b.a)((function(e){return{root:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",alignItems:"center",padding:e.spacing(1,2),border:"1px solid ".concat(e.palette.divider)},label:{textTransform:"uppercase"}}}));function te(e){var t=e.icon,n=e.label,a=e.value,r=ee();return Object(C.jsxs)(h.a,{className:r.root,children:[Object(C.jsx)(x.a,{children:t}),Object(C.jsxs)(x.a,{children:[Object(C.jsx)(O.a,{variant:"h5",align:"right",children:a}),Object(C.jsx)(O.a,{variant:"caption",className:r.label,children:n})]})]})}var ne=n(385),ae=n(386),re=n(387),ce=Object(b.a)((function(e){return{root:{padding:e.spacing(2),border:"1px solid ".concat(e.palette.divider)}}}));function ie(e){var t=e.title,n=e.children,a=ce();return Object(C.jsxs)(h.a,{className:a.root,children:[Object(C.jsx)(O.a,{variant:"button",children:t}),Object(C.jsx)(x.a,{mt:2,children:n})]})}var se=n(378),oe=n(382),le=n(381),de=n(377),ue=n(379),je=n(380),be=Object(b.a)({table:{}});function he(e){var t=e.studentList,n=be();return Object(C.jsx)(de.a,{children:Object(C.jsxs)(se.a,{className:n.table,size:"small","aria-label":"simple table",children:[Object(C.jsx)(ue.a,{children:Object(C.jsxs)(je.a,{children:[Object(C.jsx)(le.a,{align:"center",children:"#"}),Object(C.jsx)(le.a,{align:"left",children:"Name"}),Object(C.jsx)(le.a,{align:"right",children:" Mark"})]})}),Object(C.jsx)(oe.a,{children:t.map((function(e,t){return Object(C.jsxs)(je.a,{children:[Object(C.jsx)(le.a,{children:t+1}),Object(C.jsx)(le.a,{align:"left",children:e.name}),Object(C.jsx)(le.a,{align:"right",children:e.mark})]},e.id)}))})]})})}var Oe=Object(b.a)((function(e){return{root:{position:"relative",paddingTop:e.spacing(1)},loading:{position:"absolute",top:e.spacing(-1),width:"100%"}}}));function xe(){var e=m(),t=p(V),n=p(J),a=p($),r=p(K),i=p(Q),s=Oe();return Object(c.useEffect)((function(){e(G.fetchData())}),[e]),Object(C.jsxs)(x.a,{className:s.root,children:[t&&Object(C.jsx)(Y.a,{className:s.loading}),Object(C.jsxs)(Z.a,{container:!0,spacing:3,children:[Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,lg:3,xl:3,children:Object(C.jsx)(te,{icon:Object(C.jsx)(W.a,{fontSize:"large",color:"primary"}),label:"male",value:n.maleCount})}),Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,lg:3,xl:3,children:Object(C.jsx)(te,{icon:Object(C.jsx)(ne.a,{fontSize:"large",color:"primary"}),label:"female",value:n.femaleCount})}),Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,lg:3,xl:3,children:Object(C.jsx)(te,{icon:Object(C.jsx)(ae.a,{fontSize:"large",color:"primary"}),label:"mark >= 8",value:n.highMarkCount})}),Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,lg:3,xl:3,children:Object(C.jsx)(te,{icon:Object(C.jsx)(re.a,{fontSize:"large",color:"primary"}),label:"mark <= 5",value:n.lowMarkCount})})]}),Object(C.jsxs)(x.a,{mt:4,children:[Object(C.jsx)(O.a,{variant:"h4",children:"All Students"}),Object(C.jsx)(x.a,{mt:4,children:Object(C.jsxs)(Z.a,{container:!0,spacing:3,children:[Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,lg:6,children:Object(C.jsx)(ie,{title:"Student with highest mark",children:Object(C.jsx)(he,{studentList:a})})}),Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,lg:6,children:Object(C.jsx)(ie,{title:"Student with lowest mark",children:Object(C.jsx)(he,{studentList:r})})})]})})]}),Object(C.jsxs)(x.a,{mt:4,children:[Object(C.jsx)(O.a,{variant:"h4",children:"Ranking By City"}),Object(C.jsx)(x.a,{mt:4,children:Object(C.jsx)(Z.a,{container:!0,spacing:3,children:i.map((function(e){return Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,lg:6,children:Object(C.jsx)(ie,{title:e.cityName,children:Object(C.jsx)(he,{studentList:e.rankingList})})},e.cityName)}))})})]})]})}var fe=n(20),me=n(92),pe=Object(g.c)({name:"city",initialState:{list:[],loading:!1},reducers:{fetchCityList:function(e){e.loading=!0},fetchCityListSuccess:function(e,t){e.loading=!1,e.list=t.payload.data},fetchCityListFailed:function(e){e.loading=!1}}}),ge=pe.actions,ve=function(e){return e.city.list},ye=Object(me.a)(ve,(function(e){return e.reduce((function(e,t){return e[t.code]=t,e}),{})})),ke=Object(me.a)(ve,(function(e){return[{name:"No select",code:""}].concat(Object(fe.a)(e)).map((function(e){return{label:e.name,value:e.code}}))})),we=pe.reducer,Ce=n(8),Se=n.n(Ce),_e=n(25),Le=n(21),Ne=n(393),Be=n(163),Fe=n.n(Be).a.create({baseURL:"https://tamnguyen-json-server.herokuapp.com",headers:{"Content-Type":"application/json"}});Fe.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),Fe.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var Ae=Fe,Me={getAll:function(e){return Ae.get("/students",{params:e})},getById:function(e){var t="/students/".concat(e);return Ae.get(t)},add:function(e){return Ae.post("/students",e)},update:function(e){var t="/students/".concat(null===e||void 0===e?void 0:e.id);return Ae.patch(t,e)},remove:function(e){var t="/students/".concat(e);return Ae.delete(t)}},Ie=n(392),Re=n(404),We=n(171),Pe=n(33),De=n(388);function Ee(e){var t=e.name,n=e.control,a=e.label,r=Object(We.a)(e,["name","control","label"]),c=Object(Pe.d)({name:t,control:n}),i=c.field,s=i.value,o=i.onBlur,l=i.onChange,d=i.ref,u=c.fieldState,j=u.invalid,b=u.error;return Object(C.jsx)(De.a,{label:a,fullWidth:!0,margin:"normal",variant:"outlined",value:s,inputRef:d,error:j,helperText:null===b||void 0===b?void 0:b.message,inputProps:r,size:"small",onBlur:o,onChange:l})}var ze=n(326),Te=n(323),qe=n(389),Ue=n(325),He=n(403),Ge=n(405);function Ve(e){var t=e.name,n=e.control,a=e.label,r=e.disabled,c=e.options,i=e.row,s=Object(Pe.d)({name:t,control:n}),o=s.field,l=o.value,d=o.onBlur,u=o.onChange,j=s.fieldState,b=j.invalid,h=j.error;return Object(C.jsxs)(Te.a,{component:"fieldset",disabled:r,error:b,fullWidth:!0,margin:"normal",children:[Object(C.jsx)(Ue.a,{component:"legend",children:a}),Object(C.jsx)(Ge.a,{row:i,name:t,onChange:u,onBlur:d,value:l,children:c.map((function(e){return Object(C.jsx)(qe.a,{disabled:e.disabled,value:e.value,control:Object(C.jsx)(He.a,{}),label:e.label},e.value)}))}),Object(C.jsx)(ze.a,{children:null===h||void 0===h?void 0:h.message})]})}var Je=n(324),$e=n(328),Ke=n(391);function Qe(e){var t=e.name,n=e.control,a=e.label,r=e.disabled,c=e.options,i=Object(Pe.d)({name:t,control:n}),s=i.field,o=s.value,l=s.onBlur,d=s.onChange,u=i.fieldState,j=u.invalid,b=u.error;return Object(C.jsxs)(Te.a,{variant:"outlined",size:"small",fullWidth:!0,error:j,disabled:r,margin:"normal",children:[Object(C.jsx)(Je.a,{id:"".concat(t,"_label"),children:a}),Object(C.jsx)($e.a,{labelId:"".concat(t,"_label"),value:o,onChange:d,onBlur:l,label:a,children:c.map((function(e){return Object(C.jsx)(Ke.a,{value:e.value,children:e.label},e.value)}))}),Object(C.jsx)(ze.a,{children:null===b||void 0===b?void 0:b.message})]})}var Xe=n(170),Ye=n(67),Ze=Ye.b().shape({name:Ye.c().required("Please enter name").test("two-words","Please enter at least two words.",(function(e){return!e||e.split(" ").filter((function(e){return Boolean(e)})).length>=2})),age:Ye.a().positive("Please enter a positive number.").integer("Please enter an integer.").min(18,"Min is 18.").max(60,"Max is 60.").required("Please enter age.").typeError("Please enter a valid number."),mark:Ye.a().min(0,"Min is 0.").max(10,"Max is 10.").required("Please enter mark.").typeError("Please enter a valid number."),gender:Ye.c().oneOf(["male","female"],"Please select either male or female.").required("Please select gender."),city:Ye.c().required("Please select a city.")});function et(e){var t=e.initialValues,n=e.onSubmit,a=Object(Pe.e)({defaultValues:t,resolver:Object(Xe.a)(Ze)}),r=a.control,i=a.handleSubmit,s=a.formState.isSubmitting,o=p(ke),l=Object(c.useState)(""),d=Object(Le.a)(l,2),u=d[0],j=d[1],b=function(){var e=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(""),e.next=4,null===n||void 0===n?void 0:n(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),j(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(x.a,{maxWidth:400,children:Object(C.jsxs)("form",{onSubmit:i(b),children:[Object(C.jsx)(Ee,{name:"name",control:r,label:"Full Name"}),Object(C.jsx)(Ve,{name:"gender",control:r,label:"Gender",row:!0,options:[{label:"Male",value:"male"},{label:"Female",value:"female"}]}),Object(C.jsx)(Ee,{name:"age",control:r,label:"Age",type:"number"}),Object(C.jsx)(Ee,{name:"mark",control:r,label:"Mark",type:"number"}),Object(C.jsx)(Qe,{name:"city",control:r,label:"City",options:o}),u&&Object(C.jsx)(Re.a,{severity:"error",children:u}),Object(C.jsx)(x.a,{children:Object(C.jsxs)(f.a,{type:"submit",variant:"contained",color:"primary",disabled:s,children:[s&&Object(C.jsx)(Ie.a,{color:"primary",size:16})," \xa0Save"]})})]})})}var tt=n(73);function nt(){var e=Object(j.h)().studentId,t=Boolean(e),n=Object(c.useState)(),a=Object(Le.a)(n,2),r=a[0],i=a[1],s=Object(j.g)();Object(c.useEffect)((function(){e&&Object(_e.a)(Se.a.mark((function t(){var n;return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Me.getById(e);case 3:n=t.sent,i(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Failed to fetch student details",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}),[e]);var o=function(){var e=Object(_e.a)(Se.a.mark((function e(n){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,Me.update(n);case 3:e.next=7;break;case 5:return e.next=7,Me.add(n);case 7:tt.b.success("Save student successfully!"),s.push("/admin/students");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=Object(N.a)({name:"",age:0,mark:0,city:"",gender:"male"},r);return Object(C.jsxs)(x.a,{children:[Object(C.jsx)(P.a,{to:"/admin/students",children:Object(C.jsxs)(O.a,{variant:"caption",style:{display:"flex",alignItems:"center"},children:[Object(C.jsx)(Ne.a,{})," \xa0Back to student list"]})}),Object(C.jsx)(O.a,{variant:"h4",children:t?"Update student info":"Add new student"}),(!t||Boolean(r))&&Object(C.jsx)(x.a,{mt:3,children:Object(C.jsx)(et,{initialValues:l,onSubmit:o})})]})}var at=n(401),rt=n(406),ct=n(394),it=n(395),st=n(396),ot=n(397),lt=Object(b.a)((function(e){return{table:{},edit:{marginRight:e.spacing(1)}}}));function dt(e){var t=e.studentList,n=e.cityMap,a=e.onEdit,r=e.onRemove,c=lt(),s=i.a.useState(!1),o=Object(Le.a)(s,2),l=o[0],d=o[1],u=i.a.useState(),j=Object(Le.a)(u,2),b=j[0],O=j[1],m=function(){d(!1)};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(de.a,{component:h.a,children:Object(C.jsxs)(se.a,{className:c.table,size:"small","aria-label":"simple table",children:[Object(C.jsx)(ue.a,{children:Object(C.jsxs)(je.a,{children:[Object(C.jsx)(le.a,{children:"Id"}),Object(C.jsx)(le.a,{children:"Name"}),Object(C.jsx)(le.a,{children:"Gender"}),Object(C.jsx)(le.a,{children:"Mark"}),Object(C.jsx)(le.a,{children:"City"}),Object(C.jsx)(le.a,{align:"center",children:"Action"})]})}),Object(C.jsx)(oe.a,{children:t.map((function(e){var t,r,i;return Object(C.jsxs)(je.a,{children:[Object(C.jsx)(le.a,{children:e.id}),Object(C.jsx)(le.a,{children:e.name}),Object(C.jsx)(le.a,{children:(i=e.gender,i?"".concat(i[0].toUpperCase()).concat(i.slice(1)):"")}),Object(C.jsx)(le.a,{children:Object(C.jsx)(x.a,{color:(r=e.mark,r>=8?"green":r>=4?"goldenrod":"red"),fontWeight:"bold",children:e.mark})}),Object(C.jsx)(le.a,{children:null===(t=n[e.city])||void 0===t?void 0:t.name}),Object(C.jsxs)(le.a,{align:"right",children:[Object(C.jsx)(f.a,{size:"small",color:"primary",onClick:function(){return null===a||void 0===a?void 0:a(e)},className:c.edit,children:"Edit"}),Object(C.jsx)(f.a,{size:"small",color:"secondary",onClick:function(){return function(e){d(!0),O(e)}(e)},children:"Remove"})]})]},e.id)}))})]})}),Object(C.jsxs)(rt.a,{open:l,onClose:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(C.jsx)(ct.a,{id:"alert-dialog-title",children:"Remove student?"}),Object(C.jsx)(it.a,{children:Object(C.jsxs)(st.a,{id:"alert-dialog-description",children:["Would you like to remove student has name is '",null===b||void 0===b?void 0:b.name,"' ?",Object(C.jsx)("br",{}),"This action can't undo."]})}),Object(C.jsxs)(ot.a,{children:[Object(C.jsx)(f.a,{onClick:m,children:"Cancel"}),Object(C.jsx)(f.a,{onClick:function(){d(!1),r&&r(b)},autoFocus:!0,children:"Ok"})]})]})]})}var ut=n(329),jt=n(398);function bt(e){var t=e.filter,n=e.cityList,a=e.onChange,r=e.onSearchChange,i=Object(c.useRef)();return Object(C.jsx)(x.a,{children:Object(C.jsxs)(Z.a,{container:!0,spacing:3,children:[Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,children:Object(C.jsxs)(Te.a,{fullWidth:!0,variant:"outlined",size:"small",children:[Object(C.jsx)(Je.a,{htmlFor:"searchByName",children:"Search by name"}),Object(C.jsx)(ut.a,{id:"searchByName",label:"Search by name",endAdornment:Object(C.jsx)(jt.a,{}),labelWidth:60,onChange:function(e){if(r){var n=Object(N.a)(Object(N.a)({},t),{},{name_like:e.target.value,_page:1});r(n)}},inputRef:i})]})}),Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,lg:2,children:Object(C.jsxs)(Te.a,{variant:"outlined",size:"small",fullWidth:!0,children:[Object(C.jsx)(Je.a,{id:"filterByCity",children:"Filter by city"}),Object(C.jsxs)($e.a,{labelId:"filterByCity",value:t.city||"",onChange:function(e){if(a){var n=Object(N.a)(Object(N.a)({},t),{},{city:e.target.value||void 0,_page:1});a(n)}},label:"Filter by city",children:[Object(C.jsx)(Ke.a,{value:"",children:Object(C.jsx)("em",{children:"All"})}),n.map((function(e){return Object(C.jsx)(Ke.a,{value:e.code,children:e.name},e.code)}))]})]})}),Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,lg:2,children:Object(C.jsxs)(Te.a,{variant:"outlined",size:"small",fullWidth:!0,children:[Object(C.jsx)(Je.a,{id:"sortBy",children:"Sort"}),Object(C.jsxs)($e.a,{labelId:"sortBy",value:t._sort?"".concat(t._sort,".").concat(t._order):"",onChange:function(e){if(a){var n=e.target.value.split("."),r=Object(Le.a)(n,2),c=r[0],i=r[1],s=Object(N.a)(Object(N.a)({},t),{},{_sort:c||void 0,_order:i||void 0});a(s)}},label:"Sort",children:[Object(C.jsx)(Ke.a,{value:"",children:Object(C.jsx)("em",{children:"No sort"})}),Object(C.jsx)(Ke.a,{value:"name.asc",children:"Name ASC"}),Object(C.jsx)(Ke.a,{value:"name.desc",children:"Name DESC"}),Object(C.jsx)(Ke.a,{value:"mark.asc",children:"Mark ASC"}),Object(C.jsx)(Ke.a,{value:"mark.desc",children:"Mark DESC"})]})]})}),Object(C.jsx)(Z.a,{item:!0,xs:12,md:6,lg:2,children:Object(C.jsx)(f.a,{variant:"outlined",color:"primary",onClick:function(){if(a){var e=Object(N.a)(Object(N.a)({},t),{},{_sort:void 0,_order:void 0,_page:1,city:void 0,name_like:void 0});a(e),i.current&&(i.current.value="")}},children:"Clear Filter"})})]})})}var ht=Object(g.c)({name:"student",initialState:{loading:!1,list:[],filter:{_page:1,_limit:15},pagination:{_limit:1,_page:1,_totalRows:1}},reducers:{fetchStudentList:function(e,t){e.loading=!0},fetchStudentListSuccess:function(e,t){e.loading=!1,e.list=t.payload.data,e.pagination=t.payload.pagination},fetchStudentListFailed:function(e){e.loading=!1},setFilter:function(e,t){e.filter=t.payload},setFilterWithDebounce:function(e,t){}}}),Ot=ht.actions,xt=function(e){return e.student.list},ft=function(e){return e.student.loading},mt=function(e){return e.student.filter},pt=function(e){return e.student.pagination},gt=ht.reducer,vt=Object(b.a)((function(e){return{root:{position:"relative",paddingTop:e.spacing(1)},titleContainer:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",alignItems:"center",marginBottom:e.spacing(4)},loading:{position:"absolute",width:"100%",top:e.spacing(-1)}}}));function yt(){var e=m(),t=vt(),n=p(xt),a=p(pt),r=p(mt),i=p(ft),s=p(ye),o=p(ve),l=Object(j.i)(),d=Object(j.g)();Object(c.useEffect)((function(){e(Ot.fetchStudentList(r))}),[e,r]);var u=function(){var t=Object(_e.a)(Se.a.mark((function t(n){return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Me.remove((null===n||void 0===n?void 0:n.id)||"");case 3:tt.b.success("Remove student successfully!"),e(Ot.setFilter(Object(N.a)({},r))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Remove student error",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)(x.a,{className:t.root,children:[i&&Object(C.jsx)(Y.a,{className:t.loading}),Object(C.jsxs)(x.a,{className:t.titleContainer,children:[Object(C.jsx)(O.a,{variant:"h4",children:"Students"}),Object(C.jsx)(P.a,{to:"".concat(l.path,"/add"),style:{textDecoration:"none"},children:Object(C.jsx)(f.a,{variant:"contained",color:"primary",children:"Add new student"})})]}),Object(C.jsx)(x.a,{mb:2,children:Object(C.jsx)(bt,{filter:r,cityList:o,onSearchChange:function(t){e(Ot.setFilterWithDebounce(t))},onChange:function(t){e(Ot.setFilter(t))}})}),Object(C.jsx)(dt,{studentList:n,cityMap:s,onEdit:function(e){d.push("".concat(l.path,"/").concat(e.id))},onRemove:u}),Object(C.jsx)(x.a,{mt:2,display:"flex",justifyContent:"center",children:Object(C.jsx)(at.a,{color:"primary",count:Math.ceil((null===a||void 0===a?void 0:a._totalRows)/(null===a||void 0===a?void 0:a._limit)),page:a._page,onChange:function(t,n){e(Ot.setFilter(Object(N.a)(Object(N.a)({},r),{},{_page:n})))}})})]})}function kt(){var e=Object(j.i)(),t=m();return Object(c.useEffect)((function(){t(ge.fetchCityList())}),[t]),Object(C.jsxs)(j.d,{children:[Object(C.jsx)(j.b,{path:e.path,exact:!0,children:Object(C.jsx)(yt,{})}),Object(C.jsx)(j.b,{path:"".concat(e.path,"/add"),children:Object(C.jsx)(nt,{})}),Object(C.jsx)(j.b,{path:"".concat(e.path,"/:studentId"),children:Object(C.jsx)(nt,{})})]})}var wt=Object(b.a)((function(e){return{root:{display:"grid",gridTemplateRows:"auto 1fr",gridTemplateColumns:"240px 1fr",gridTemplateAreas:'"header header" "sidebar main"',minHeight:"100vh"},header:{gridArea:"header"},sidebar:{gridArea:"sidebar",borderRight:"1px solid ".concat(e.palette.divider),backgroundColor:e.palette.background.paper},main:{gridArea:"main",backgroundColor:e.palette.background.paper,padding:e.spacing(2,3)}}}));function Ct(){var e=wt();return Object(C.jsxs)(x.a,{className:e.root,children:[Object(C.jsx)(x.a,{className:e.header,children:Object(C.jsx)(U,{})}),Object(C.jsx)(x.a,{className:e.sidebar,children:Object(C.jsx)(E,{})}),Object(C.jsx)(x.a,{className:e.main,children:Object(C.jsxs)(j.d,{children:[Object(C.jsx)(j.b,{path:"/admin/dashboard",children:Object(C.jsx)(xe,{})}),Object(C.jsx)(j.b,{path:"/admin/students",children:Object(C.jsx)(kt,{})})]})})]})}var St=function(){return Object(C.jsxs)(j.d,{children:[Object(C.jsx)(j.b,{path:"/",exact:!0,children:Object(C.jsx)(_,{})}),Object(C.jsx)(B,{path:"/admin",children:Object(C.jsx)(Ct,{})}),Object(C.jsx)(j.b,{children:Object(C.jsx)(L,{})})]})},_t=n(169),Lt=n(41),Nt=n(157);function Bt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var Ft=Object(g.b)("counter/fetchCount",function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bt(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),At=Object(g.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(Ft.pending,(function(e){e.status="loading"})).addCase(Ft.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),Mt=At.actions,It=(Mt.increment,Mt.decrement,Mt.incrementByAmount,At.reducer),Rt=n(167),Wt=n(11),Pt=n(28),Dt=Se.a.mark(qt),Et=Se.a.mark(Ut),zt=Se.a.mark(Ht),Tt=Se.a.mark(Gt);function qt(e){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Wt.d)(1e3);case 3:return localStorage.setItem("access_token","fake_token"),e.next=6,Object(Wt.f)(k.loginSuccess({id:1,name:"Easy Frontend"}));case 6:return e.next=8,Object(Wt.f)(Object(Pt.d)("/admin/dashboard"));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(Wt.f)(k.loginFailed(e.t0.message));case 14:case"end":return e.stop()}}),Dt,null,[[0,10]])}function Ut(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Wt.d)(500);case 2:return localStorage.removeItem("access_token"),e.next=5,Object(Wt.f)(Object(Pt.d)("/"));case 5:case"end":return e.stop()}}),Et)}function Ht(){var e;return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Boolean(localStorage.getItem("access_token"))){t.next=8;break}return t.next=5,Object(Wt.g)(k.login.type);case 5:return e=t.sent,t.next=8,Object(Wt.e)(qt,e.payload);case 8:return t.next=10,Object(Wt.g)(k.logout.type);case 10:return t.next=12,Object(Wt.b)(Ut);case 12:t.next=0;break;case 14:case"end":return t.stop()}}),zt)}function Gt(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Wt.e)(Ht);case 2:case"end":return e.stop()}}),Tt)}var Vt={getAll:function(){return Ae.get("/cities",{params:{_page:1,_limit:50}})}},Jt=Se.a.mark(Zt),$t=Se.a.mark(en),Kt=Se.a.mark(tn),Qt=Se.a.mark(nn),Xt=Se.a.mark(an),Yt=Se.a.mark(rn);function Zt(){var e,t,n,a,r,c,i;return Se.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(Wt.a)([Object(Wt.b)(Me.getAll,{_page:1,_limit:1,gender:"male"}),Object(Wt.b)(Me.getAll,{_page:1,_limit:1,gender:"female"}),Object(Wt.b)(Me.getAll,{_page:1,_limit:1,mark_gte:8}),Object(Wt.b)(Me.getAll,{_page:1,_limit:1,mark_lte:5})]);case 2:return e=s.sent,t=e.map((function(e){return e.pagination._totalRows})),n=Object(Le.a)(t,4),a=n[0],r=n[1],c=n[2],i=n[3],s.next=7,Object(Wt.f)(G.setStatistics({femaleCount:r,highMarkCount:c,lowMarkCount:i,maleCount:a}));case 7:case"end":return s.stop()}}),Jt)}function en(){var e,t;return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Wt.b)(Me.getAll,{_page:1,_limit:5,_order:"desc",_sort:"mark"});case 2:return e=n.sent,t=e.data,n.next=6,Object(Wt.f)(G.setHighestStudentList(t));case 6:case"end":return n.stop()}}),$t)}function tn(){var e,t;return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Wt.b)(Me.getAll,{_page:1,_limit:5,_order:"asc",_sort:"mark"});case 2:return e=n.sent,t=e.data,n.next=6,Object(Wt.f)(G.setLowestStudentList(t));case 6:case"end":return n.stop()}}),Kt)}function nn(){var e,t,n,a,r;return Se.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Wt.b)(Vt.getAll);case 2:return e=c.sent,t=e.data,n=t.map((function(e){return Object(Wt.b)(Me.getAll,{_page:1,_limit:5,_order:"desc",_sort:"mark",city:e.code})})),c.next=7,Object(Wt.a)(n);case 7:return a=c.sent,r=a.map((function(e,n){return{cityId:t[n].code,cityName:t[n].name,rankingList:e.data}})),c.next=11,Object(Wt.f)(G.setRankingByCityList(r));case 11:case"end":return c.stop()}}),Qt)}function an(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Wt.a)([Object(Wt.b)(Zt),Object(Wt.b)(en),Object(Wt.b)(tn),Object(Wt.b)(nn)]);case 3:return e.next=5,Object(Wt.f)(G.fetchDataSuccess());case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(Wt.f)(G.fetchDataError());case 11:console.log("Failed to fetch dashboard data",e.t0);case 12:case"end":return e.stop()}}),Xt,null,[[0,7]])}function rn(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Wt.h)(G.fetchData.type,an);case 2:case"end":return e.stop()}}),Yt)}var cn=Se.a.mark(ln),sn=Se.a.mark(dn),on=Se.a.mark(un);function ln(e){var t;return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Wt.b)(Me.getAll,e.payload);case 3:return t=n.sent,n.next=6,Object(Wt.f)(Ot.fetchStudentListSuccess(t));case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(0),console.log("Failed to fetch student list",n.t0),n.next=13,Object(Wt.f)(Ot.fetchStudentListFailed());case 13:case"end":return n.stop()}}),cn,null,[[0,8]])}function dn(e){return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Wt.f)(Ot.setFilter(e.payload));case 2:case"end":return t.stop()}}),sn)}function un(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Wt.h)(Ot.fetchStudentList.type,ln);case 2:return e.next=4,Object(Wt.c)(500,Ot.setFilterWithDebounce.type,dn);case 4:case"end":return e.stop()}}),on)}var jn=Se.a.mark(hn),bn=Se.a.mark(On);function hn(){var e;return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Wt.b)(Vt.getAll);case 3:return e=t.sent,t.next=6,Object(Wt.f)(ge.fetchCityListSuccess(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(Wt.f)(ge.fetchCityListFailed());case 12:case"end":return t.stop()}}),jn,null,[[0,8]])}function On(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Wt.h)(ge.fetchCityList.type,hn);case 2:case"end":return e.stop()}}),bn)}var xn=Se.a.mark(fn);function fn(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Rt.a)([Gt(),rn(),un(),On()]);case 2:case"end":return e.stop()}}),xn)}var mn=Object(Lt.b)({router:Object(r.b)(u),counter:It,auth:w,dashboard:X,student:gt,city:we}),pn=Object(_t.a)(),gn=Object(g.a)({reducer:mn,middleware:function(e){return e().concat(pn,Object(Nt.a)(u))}});pn.run(fn);n(315),n(316),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(l.a,{store:gn,children:Object(C.jsxs)(r.a,{history:u,children:[Object(C.jsx)(a.a,{}),Object(C.jsx)(St,{}),Object(C.jsx)(tt.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[317,1,2]]]);
//# sourceMappingURL=main.e519c591.chunk.js.map